<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Matt Weglewski's didactics</title>
  <meta name="description" content="Matt's Didactics" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='80'>ðŸ“š</text></svg>">
  <style>
    /* ====== THEME ====== */
    :root {
      --bg: #0b0d12;           /* bg */
      --bg-elev: #11141b;      /* bg2 */
      --card: #141823;         /* cards */
      --muted: #9aa3b2;        /* ht */
      --text: #e6eaf2;         /* mt */
      --primary: #7aa2ff;      /* acc */
      --primary-2: #9bb7ff;    /* lacc */
      --danger: #ff6b6b;
      --ok: #4fd1c5;
      --ring: 0 0 0 3px rgba(122,162,255,.25);
      --radius: 16px;
      --shadow: 0 10px 30px rgba(0,0,0,.45);
      --shadow-soft: 0 6px 18px rgba(0,0,0,.3);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1200px 800px at 10% 0%, #0d1120 0%, var(--bg) 55%) fixed;
      color: var(--text);
      font: 16px/1.6 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif;
      letter-spacing: .1px;
    }

    /* ====== Header ====== */
    header {
      position: sticky; top: 0; z-index: 50;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, rgba(11,13,18,.9), rgba(11,13,18,.6) 60%, rgba(11,13,18,0));
      border-bottom: 1px solid rgba(154,163,178,.08);
    }
    .wrap { max-width: 1100px; margin: 0 auto; padding: 18px 20px; }
    .row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }

    .brand {
      display: flex; align-items: center; gap: 12px; min-width: 220px;
    }
    .brand .logo {
      width: 40px; height: 40px; display: grid; place-items: center;
      background: linear-gradient(135deg, #11192b, #0f1322);
      border: 1px solid rgba(154,163,178,.12);
      border-radius: 12px; box-shadow: var(--shadow-soft);
      font-size: 20px;
    }
    .brand h1 { font-size: 18px; margin: 0; letter-spacing: .3px; }
    .brand small { display:block; color: var(--muted); margin-top:-4px; font-size:12px; }

    /* ====== Controls ====== */
    .controls { display:flex; gap:10px; flex:1; justify-content:flex-end; flex-wrap:wrap; }
    .input, select, button {
      background: var(--bg-elev);
      color: var(--text);
      border: 1px solid rgba(154,163,178,.15);
      border-radius: 12px;
      padding: 10px 12px;
      outline: none;
    }
    .input:focus, select:focus { box-shadow: var(--ring); border-color: rgba(122,162,255,.6); }

    .search { display:flex; align-items:center; gap:8px; flex:1; min-width: 220px; }
    .search input { flex:1; background: transparent; border:none; color:var(--text); font-size:14px; }
    .search .icon { opacity:.7; }

    .btn {
      padding: 10px 14px; border-radius: 12px; border: 1px solid rgba(154,163,178,.15);
      background: linear-gradient(180deg, #141a2a, #101525);
      cursor: pointer; transition: .2s transform, .2s background;
    }
    .btn:hover { transform: translateY(-1px); }

    /* ====== tags ====== */
    .tags { display:flex; gap:8px; flex-wrap:wrap; margin: 10px 0 0; }
    .tag {
      font-size:12px; padding:6px 10px; border-radius: 999px; border:1px solid rgba(154,163,178,.18);
      background:#101523; color: var(--primary-2); cursor:pointer; user-select:none;
    }
    .tag.active { background: #17203a; color: #c8d5ff; border-color: rgba(122,162,255,.5); box-shadow: var(--ring); }

    /* ====== card webs ====== */
    main { max-width: 1100px; margin: 18px auto 80px; padding: 0 20px; }
    .grid { display: grid; grid-template-columns: repeat( auto-fill, minmax(240px, 1fr) ); gap: 16px; }

    .card {
      position: relative;
      /* keep border and shadow on the card shell */
      border: 1px solid rgba(154,163,178,.14);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
      min-height: 260px;
      /* visual split: cover in the top half, content on a uniform panel below */
      background: transparent; /* background for the card shell comes from its parts */
    }
    .card:hover { transform: translateY(-2px); border-color: rgba(122,162,255,.35); box-shadow: 0 16px 40px rgba(0,0,0,.55); }

    /* cover now takes the top 50% of the card */
    .cover {
      flex: none;
      height: 120px;
      min-height: 120px;
      max-height: 120px;
      background: linear-gradient(135deg, #182340, #0e1426);
      display: grid;
      place-items: center;
      font-size: 46px;
      border-top-left-radius: var(--radius);
      border-top-right-radius: var(--radius);
      overflow: hidden;
    }

    /* content is a separate panel with a solid background */
    .content {
      padding: 14px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      background: var(--card);
    }

    .title { font-weight: 650; letter-spacing:.2px; }
    .meta { font-size: 12px; color: var(--muted); display:flex; gap:8px; flex-wrap:wrap; }
    .actions { margin-top: auto; display:flex; gap:8px; }
    .pill { font-size: 12px; padding: 6px 10px; border-radius: 999px; border:1px solid rgba(154,163,178,.18); color: var(--muted); }

    /* ensure cover image fills the top half and keeps rounded top corners */
    .cover img{
      width: 100%;
      height: 100%;
      max-height: 120px;
      object-fit: cover;
      object-position: top;
      display: block;
      border-top-left-radius: 16px;
      border-top-right-radius: 16px;
      transition: transform .3s ease;
    }
    .card:hover .cover img{ transform: scale(1.05); }

    .link { text-decoration:none; color: var(--text); }
    .btn-primary { background: linear-gradient(180deg, #1a2750, #142348); border-color: rgba(122,162,255,.5); }
    .btn-outline { background: transparent; }

    /* ====== modal ====== */
    dialog { width: min(860px, 92vw); border: none; border-radius: 18px; padding: 0; background: var(--card); color: var(--text); box-shadow: var(--shadow); }
    dialog::backdrop { background: rgba(0,0,0,.55); backdrop-filter: blur(3px); }
    .modal { display: grid; grid-template-columns: 240px 1fr; gap: 18px; padding: 18px; }
    .modal .cover {
      background: none;
      min-width: 180px;
      max-width: 240px;
      min-height: 180px;
      max-height: 240px;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 16px;
      overflow: hidden;
      margin: 0 auto;
    }
    .modal .cover img {
      width: 100%;
      height: 100%;
      max-width: 240px;
      max-height: 240px;
      object-fit: contain;
      object-position: center;
      display: block;
      background: none;
      border-radius: 16px;
      box-shadow: none;
    }
    .modal h2 { margin: 0; }
    .modal .desc { color: var(--muted); }
    .modal .row { justify-content: flex-start; }
    .modal .close { position:absolute; top:12px; right:12px; }

    /* ====== footer ====== */
    footer { border-top: 1px solid rgba(154,163,178,.12); color: var(--muted); padding: 18px 20px; text-align:center; }

    /* RWD */
    @media (max-width: 720px) {
      .controls { justify-content: stretch; }
      .modal { grid-template-columns: 1fr; }
      .brand h1 { font-size: 16px; }
    }
  </style>
</head>
<body>

  <header>
    <div class="wrap">
      <div class="row">
        <div class="brand">
          <div class="logo" aria-hidden="true">ðŸ“š</div>
          <div>
            <h1>Didactics</h1>
            <small>R 3 D H 3 R R 1 N 6</small>
          </div>
        </div>
        <div class="controls">
          <div class="search input" role="search">
            <span class="icon">ðŸ”Ž</span>
            <input id="q" type="search" placeholder="Search..." autocomplete="off" />
          </div>
          <select id="sort">
            <option value="recent">Recent</option>
            <option value="az">Title Aâ€“Z</option>
            <option value="za">Title Zâ€“A</option>
          </select>
          <button id="clear" class="btn" title="Disable filters">Disable</button>
        </div>
        <div id="tags" class="tags" aria-label="Filter by tags"></div>
      </div>
    </div>
  </header>

  <main>
    <div id="grid" class="grid" aria-live="polite"></div>
  </main>

  <footer>
    Â© <span id="year"></span> â€¢ by Mateusz WÄ™glewski â€¢ <a class="link" href="https://github.com/mateuszweglewski" target="_blank" rel="noopener">See my other projects</a>
  </footer>

  <!-- ====== Card Themes ====== -->
  <template id="tpl-card">
    <article class="card" data-id="">
      <div class="cover" aria-hidden="true">ðŸ“–</div>
      <div class="content">
        <div class="title"></div>
        <div class="meta"></div>
        <div class="actions">
          <a class="btn btn-primary link btn-read" href="#" target="_blank" rel="noopener">Open</a>
          <button class="btn btn-outline btn-info" data-action="info">Details</button>
        </div>
      </div>
    </article>
  </template>

  <!-- ====== MODAL ====== -->
  <dialog id="dlg">
    <button class="btn close" data-action="close">âœ•</button>
    <div class="modal">
      <div class="cover" id="dlgCover">ðŸ“–</div>
      <div>
        <h2 id="dlgTitle"></h2>
        <p class="desc" id="dlgDesc"></p>
        <div class="row" style="gap:10px;margin:8px 0 14px">
          <span class="pill" id="dlgAuthor"></span>
          <span class="pill" id="dlgYear"></span>
          <span class="pill" id="dlgFormat"></span>
        </div>
        <div class="tags" id="dlgTags"></div>
        <div class="row" style="gap:10px;margin-top:14px">
          <a id="dlgOpen" class="btn btn-primary link" target="_blank" rel="noopener">Open PDF</a>
          <a id="dlgDownload" class="btn btn-outline link" download>Download</a>
        </div>
      </div>
    </div>
  </dialog>

  <script>
    // ====== Library config ======
    const books = [
      {
        id: '1',
        title: 'To be',
        author: 'Mateusz WÄ™glewski',
        year: 2023,
        tags: ['a1','a0'],
        description: 'Elementary to be worksheet',
        coverUrl: 'gog_cover.png',
        url: 'gog_to_be.pdf',
        format: 'PDF'
      },
      {
        id: '2',
        title: 'To have got',
        author: 'Mateusz WÄ™glewski',
        year: 2023,
        tags: ['a1','a0'],
        description: 'Elementary to have got worksheet',
        coverUrl: 'gog_cover.png',
        url: 'gog_to_have_got.pdf',
        format: 'PDF'
      },
      {
        id: '3',
        title: 'Plural forms',
        author: 'Mateusz WÄ™glewski',
        year: 2023,
        tags: ['a1','a0', 'a2'],
        description: 'Regular and irregular plural forms worksheet',
        coverUrl: 'gog_cover.png',
        url: 'gog_plurals.pdf',
        format: 'PDF'
      },
      {
        id: '4',
        title: 'The Present Simple Tense',
        author: 'Mateusz WÄ™glewski',
        year: 2024,
        tags: ['a1','a2', 'b1'],
        description: 'The Present Simple tense worksheet',
        coverUrl: 'gog_cover.png',
        url: 'gog_pr_simple.pdf',
        format: 'PDF'
      },
      {
        id: '5',
        title: 'The Present Progressive Tense',
        author: 'Mateusz WÄ™glewski',
        year: 2024,
        tags: ['a1','a2', 'b1'],
        description: 'The Present Progressive tense worksheet',
        coverUrl: 'gog_cover.png',
        url: 'gog_pr_prog.pdf',
        format: 'PDF'
      },
      {
        id: '6',
        title: 'Matura ZSM-E 2025 Poziom Podstawowy',
        author: 'Mateusz WÄ™glewski, Anita Drobisz-WÄ™glewska',
        year: 2025,
        tags: ['b1', 'b2'],
        description: 'Coming soon',
        coverUrl: '',
        url: 'sth.pdf',
        format: 'PDF'
      },
      {
        id: '7',
        title: ''Matura ZSM-E 2025 Poziom Rozszerzony',
        author: 'Mateusz WÄ™glewski, Anita Drobisz-WÄ™glewska',
        year: 2025,
        tags: ['b1','b2'],
        description: 'Coming soon',
        coverUrl: '',
        url: 'sth.pdf',
        format: 'PDF'
      },
      {
        id: '8',
        title: 'Demonstrative pronouns',
        author: 'Mateusz WÄ™glewski',
        year: 2024,
        tags: ['a0','a1'],
        description: 'This/that/these/those worksheet',
        coverUrl: 'gog_cover.png',
        url: 'gog_demonstratives.pdf',
        format: 'PDF'
      },
      {
        id: '9',
        title: 'Question tags',
        author: 'Mateusz WÄ™glewski',
        year: 2023,
        tags: ['b1','b2'],
        description: 'Question tags worksheet',
        coverUrl: 'gog_cover.png',
        url: 'gog_qtags.pdf',
        format: 'PDF'
      },
      {
        id: '10',
        title: 'Cleft sentences',
        author: 'Mateusz WÄ™glewski',
        year: 2025,
        tags: ['c1','c2'],
        description: 'Cleft sentences worksheet',
        coverUrl: 'gog_cover.png',
        url: 'gog_clefts.pdf',
        format: 'PDF'
      },
      {
        id: '11',
        title: 'Used',
        author: 'Mateusz WÄ™glewski',
        year: 2024,
        tags: ['a2','b1', 'b2', 'c1'],
        description: 'Used to, Be used to, Get used to, Would, Present Simple worksheet',
        coverUrl: 'gog_cover.png',
        url: 'gog_used.pdf',
        format: 'PDF'
      },
      {
        id: '12',
        title: 'Unreal Past',
        author: 'Mateusz WÄ™glewski',
        year: 2024,
        tags: ['b2', 'c1', 'c2'],
        description: 'Unreal Past worksheet, including: wish, if only, as if/though, would rather/sooner, had better, suppose/supposing, prefer & rather expressions, conditionals ',
        coverUrl: 'gog_cover.png',
        url: 'gog_unreal.pdf',
        format: 'PDF'
      },
      {
        id: '13',
        title: 'Correlative conjunctions',
        author: 'Mateusz WÄ™glewski',
        year: 2024,
        tags: ['b1', 'b2'],
        description: 'Correlative conjunctions worksheet, including: both/and, either/or, neither/nor',
        coverUrl: 'gog_cover.png',
        url: 'gog_cor_coj.pdf',
        format: 'PDF'
      },
      {
        id: '14',
        title: 'Present Simple vs Present Progressive',
        author: 'Mateusz WÄ™glewski',
        year: 2025,
        tags: ['a2', 'b1', 'b2'],
        description: 'Present Simple vs Present Progressive worksheet',
        coverUrl: 'gog_cover.png',
        url: 'gog_pr_simple_pr_prog.pdf',
        format: 'PDF'
      },
      {
        id: '15',
        title: 'Passive Voice',
        author: 'Mateusz WÄ™glewski',
        year: 2025,
        tags: ['a2', 'b1', 'b2', 'c1'],
        description: 'Passive Voice worksheet',
        coverUrl: 'gog_cover.png',
        url: 'gog_passive.pdf',
        format: 'PDF'
      }
    ];

    // ====== Tools ======
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

    const state = { q: '', tag: null, sort: 'recent' };

    const by = {
      recent: (a,b) => (b.year??0) - (a.year??0) || a.title.localeCompare(b.title),
      az: (a,b) => a.title.localeCompare(b.title, 'pl', {sensitivity:'base'}),
      za: (a,b) => b.title.localeCompare(a.title, 'pl', {sensitivity:'base'}),
      author: (a,b) => (a.author||'').localeCompare((b.author||''), 'pl', {sensitivity:'base'})
    };

    function uniqueTags(items){
      return [...new Set(items.flatMap(b => b.tags||[]))].sort((a,b)=>a.localeCompare(b,'pl',{sensitivity:'base'}));
    }

    function match(b){
      const q = state.q.trim().toLowerCase();
      const hitQ = !q || [b.title,b.author,(b.tags||[]).join(' ')].join(' ').toLowerCase().includes(q);
      const hitT = !state.tag || (b.tags||[]).includes(state.tag);
      return hitQ && hitT;
    }

    function renderTags(){
      const box = $('#tags');
      box.innerHTML = '';
      const allTags = uniqueTags(books);
      if(!allTags.length) return;
      const make = (t) => {
        const el = document.createElement('button');
        el.className = 'tag'+(state.tag===t?' active':'');
        el.textContent = t;
        el.onclick = () => { state.tag = state.tag===t ? null : t; render(); };
        return el;
      }
      box.appendChild(make(''));
      box.firstChild.textContent = 'All';
      box.firstChild.className = 'tag'+(state.tag===null?' active':'');
      allTags.forEach(t => box.appendChild(make(t)));
    }

    function cardFrom(book){
      const tpl = $('#tpl-card');
      const node = tpl.content.firstElementChild.cloneNode(true);
      node.dataset.id = book.id;
      const cover = $('.cover', node);
      if (book.coverUrl) {
        const img = document.createElement('img');
        img.src = book.coverUrl;
        img.alt = book.title;
        img.loading = 'lazy';
        img.style.width = '100%';
        img.style.height = '100%';
        img.style.objectFit = 'cover';
        img.style.objectPosition = 'top';
        img.style.display = 'block';
        cover.innerHTML = '';
        cover.appendChild(img);
      } else {
        cover.textContent = book.coverEmoji || 'ðŸ“–';
      }
      const metaText = [book.author, book.year ? `â€¢ ${book.year}` : ''].filter(Boolean).join(' ');
      $('.title', node).textContent = book.title;
      $('.meta', node).innerHTML = metaText ? `<span>${metaText}</span>` : '';
      $('.btn-read', node).href = book.url;
      $('[data-action="info"]', node).onclick = () => openModal(book);
      return node;
    }

    function render(){
      const grid = $('#grid');
      grid.innerHTML = '';
      const list = books.filter(match).sort(by[state.sort]||by.recent);
      if(!list.length){
        const empty = document.createElement('div');
        empty.className = 'pill';
        empty.style.margin = '10px auto';
        empty.textContent = 'Nothing found.';
        grid.appendChild(empty);
        return;
      }
      list.forEach(b => grid.appendChild(cardFrom(b)));
    }

    // ====== MODAL ======
    function openModal(b){
      $('#dlgTitle').textContent = b.title;
      $('#dlgDesc').textContent = b.description || '';
      $('#dlgAuthor').textContent = b.author || '';
      $('#dlgYear').textContent = b.year ? `Year: ${b.year}` : 'Year: â€”';
      $('#dlgFormat').textContent = b.format || 'â€”';
      const tagsBox = $('#dlgTags');
      tagsBox.innerHTML = '';
      (b.tags||[]).forEach(t=>{
        const el = document.createElement('span');
        el.className = 'tag'; el.textContent = t; tagsBox.appendChild(el);
      });
      const coverBox = $('#dlgCover');
      coverBox.innerHTML = '';
      coverBox.style.background = 'linear-gradient(135deg,#182340,#0e1426)';
      if (b.coverUrl) {
        const img = document.createElement('img');
        img.src = b.coverUrl;
        img.alt = b.title;
        img.loading = 'lazy';
        img.style.width = '100%';
        img.style.height = '100%';
        img.style.objectFit = 'contain';
        img.style.objectPosition = 'center';
        img.style.display = 'block';
        coverBox.appendChild(img);
      } else {
        coverBox.textContent = b.coverEmoji || 'ðŸ“–';
      }
      const open = $('#dlgOpen'); open.href = b.url;
      const dl = $('#dlgDownload'); dl.href = b.url; dl.download = (b.title||'ebook').replace(/\s+/g,'-').toLowerCase();
      const dlg = $('#dlg');
      dlg.showModal();
    }

    $('#dlg').addEventListener('click', (e)=>{
      const dlg = $('#dlg');
      const rect = dlg.getBoundingClientRect();
      if(e.clientY < rect.top || e.clientY > rect.bottom || e.clientX < rect.left || e.clientX > rect.right){
        dlg.close();
      }
    });
    $('[data-action="close"]').onclick = () => $('#dlg').close();

    // ====== UI ======
    $('#q').addEventListener('input', (e)=>{ state.q = e.target.value; render(); });
    $('#sort').addEventListener('change', (e)=>{ state.sort = e.target.value; render(); });
    $('#clear').addEventListener('click', ()=>{ state.q=''; $('#q').value=''; state.tag=null; $('#sort').value='recent'; render(); });

    // ====== initialise ======
    $('#year').textContent = new Date().getFullYear();
    renderTags();
    render();

    // ======  UX ======
    function syncHash(){
      const params = new URLSearchParams();
      if(state.q) params.set('q', state.q);
      if(state.tag) params.set('tag', state.tag);
      if(state.sort && state.sort!=='recent') params.set('sort', state.sort);
      const h = params.toString();
      history.replaceState(null, '', h ? `#${h}` : ' ');
    }
    function readHash(){
      const h = location.hash.replace(/^#/, '');
      const p = new URLSearchParams(h);
      state.q = p.get('q')||''; $('#q').value = state.q;
      state.tag = p.get('tag');
      state.sort = p.get('sort')||'recent'; $('#sort').value = state.sort;
    }
    addEventListener('hashchange', ()=>{ readHash(); render(); });
    const _render = render; render = function(){ _render(); syncHash(); };
    readHash(); render();
  </script>
</body>
</html>
